<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" th:src="@{/jquery-2.2.4.min.js}" ></script>
    <style>
        p{
            font-size: 12px;
        }
    </style>
    <script type="text/javascript" >
        function initPersonArr() {
            var person1 = new Object();
            person1.id="1"
            person1.name="a"
            var person2 = new Object();
            person2.id="2"
            person2.name="b"
            var personArr= new Array();
            personArr.push(person1)
            personArr.push(person2)
            return personArr;
        }

        //字符串数组上传
        function simpleArrUpload() {
            var data = ["1","2","3"]
            $.ajax({
                url:"/simpleArr",
                traditional:true,
                data:{"data":data},
                success:function (data) {
                    console.log(data)
                }
            })
        }

        //对象数组上传
        function objArrUpload() {
            var personArr = initPersonArr();
            $.ajax({
                url:"/objArr",
                type:"POST",
                data:{"user":JSON.stringify(personArr)},
                success:function (data) {
                    console.log(data)
                }
            })
        }

        //复选框数据上传
        function submitCheckBox(){
            console.log("1")
            var selectedValueArr = document.getElementsByName("fruit");
            var data = new Array();
            for(var index in selectedValueArr){
                if(selectedValueArr[index].checked){
                    data.push(selectedValueArr[index].value)
                }
            }
            console.log(data)
            $.ajax({
                url:"/checkBox",
                traditional:true,
                type:"POST",
                data:{"data":data},
                success:function (data) {
                    console.log(data)
                }
            })
        }

        //自定义表单提交
        function customerForm() {
            var personArr = initPersonArr();
            var classRoom = new Object();
            classRoom.name = "V";
            classRoom.student = personArr;
            var formData = new FormData();
            var _classRoom = classRoom;
            formData.append("_classRoom", JSON.stringify(_classRoom));
            var request = new XMLHttpRequest();
            request.open("POST", "/objFromForm");
            request.send(formData);
        }
    </script>
</head>
<body>
    <div>
        <label>
            <p>简单的字符串数组传递:["1","2","3"]</p>
            <button onclick="simpleArrUpload();">simpleArrUpload</button>
        </label>
    </div>

    <div>
        <p>对象数组传递：[{"id":"1","name":"a"},{"id":"2","name":"b"}]</p>
        <button onclick="objArrUpload();">objArrUpload</button>
    </div>


    <div>
        <p>自定义表单传递嵌套对象: {"name":"V","student":[{"id":"1","name":"a"},{"id":"2","name":"b"}]}
        </p>
        <button onclick="customerForm();">customerForm</button>
    </div>

    <div>
        <p>复选框数据传递</p>
        <label><input name="fruit" type="checkbox" value="a1" title="this is a1"/>a1</label>
        <label><input name="fruit" type="checkbox" value="a2" title="this is a2"/>a2</label>
        <label><input name="fruit" type="checkbox" value="a3" title="this is a3"/>a3</label>
        <button onclick="submitCheckBox()"> submit </button>
    </div>

    <div>
        <p>表单处理</p>
        <form method="POST" enctype="multipart/form-data" action="/formHandler">
            <label><input name="name"/> 姓名</label>

            <label><input type="file" name="file" value="press"/></label>

            <input type="submit" value="submit"/>
        </form>
    </div>
</body>
</html>